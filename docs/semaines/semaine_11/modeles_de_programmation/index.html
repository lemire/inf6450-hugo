<!doctype html><html lang=fr dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="

 Modèles de programmation XML


 Il y a plusieurs façons de traiter du XML. Chaque méthode a ses avantages et ses inconvénients. Bien que ce module s’intéresse surtout à l’approche DOM, il est important de connaître l’ensemble des méthodologies possibles et d’avoir une idée des forces et faiblesses relatives de chacune.
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://lemire.github.io/inf6450-hugo/docs/semaines/semaine_11/modeles_de_programmation/"><meta property="og:site_name" content="INF 6450 - Gestion de l'information avec XML"><meta property="og:title" content="Modèles de programmation"><meta property="og:description" content="Modèles de programmation XML Il y a plusieurs façons de traiter du XML. Chaque méthode a ses avantages et ses inconvénients. Bien que ce module s’intéresse surtout à l’approche DOM, il est important de connaître l’ensemble des méthodologies possibles et d’avoir une idée des forces et faiblesses relatives de chacune."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>Modèles de programmation | INF 6450 - Gestion de l'information avec XML</title><link rel=icon href=/inf6450-hugo/favicon.png><link rel=manifest href=/inf6450-hugo/manifest.json><link rel=canonical href=https://lemire.github.io/inf6450-hugo/docs/semaines/semaine_11/modeles_de_programmation/><link rel=stylesheet href=/inf6450-hugo/book.min.a006656c8516e75b9916bf87553cdae09b7d022a0ef8c51fcafcb935e4e3d410.css integrity="sha256-oAZlbIUW51uZFr+HVTza4Jt9AioO+MUfyvy5NeTj1BA=" crossorigin=anonymous><script defer src=/inf6450-hugo/fuse.min.js></script><script defer src=/inf6450-hugo/fr.search.min.404ed02339d2d5426e41a3dfb7f7d97d5856d49e3b81cc7db3aeee0980357f55.js integrity="sha256-QE7QIznS1UJuQaPft/fZfVhW1J47gcx9s67uCYA1f1U=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/inf6450-hugo/><img src=/inf6450-hugo/xml.jpg alt=Logo class=book-icon><span>INF 6450 - Gestion de l'information avec XML</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Rechercher aria-label=Rechercher maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/inf6450-hugo/docs/professeur/>Pense-bête DTD</a></li><li><span>Semaines</span><ul><li><input type=checkbox id=section-662cc567f710f13ba33a8b95f1c4774b class=toggle>
<label for=section-662cc567f710f13ba33a8b95f1c4774b class=flex><a href=/inf6450-hugo/docs/semaines/semaine_1/ class=flex-auto>Semaine 1</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_1/installation_dun_navigateur_moderne/>Installation d’un navigateur moderne</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/creer_un_fichier_xml/>Créer un fichier XML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/introduction_a_xml/>Introduction à XML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/principes_du_xml/>Principes du XML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/encodage_des_caracteres_unicode/>Encodage des caractères Unicode</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/mise_en_forme_du_xml/>Mise en forme du XML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/laboratoire_sur_la_structure_en_arbre_des_documents_xml/>Laboratoire sur la structure en arbre des documents XML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/petit_guide_dusage_du_courriel_efficace/>Petit guide d’usage du courriel efficace</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_1/autoevaluation/>Autoévaluation</a></li></ul></li><li><input type=checkbox id=section-c76990db7973ec20e567f82efc226c40 class=toggle>
<label for=section-c76990db7973ec20e567f82efc226c40 class=flex><a role=button class=flex-auto>Semaine 2</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_2/definition_de_type_de_document/>Définition de type de document</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_2/validation_de_documents_xml/>Validation de documents XML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_2/autoevaluation/>Autoévaluation</a></li></ul></li><li><input type=checkbox id=section-210d14d44c656daf110a7cf2152571c8 class=toggle>
<label for=section-210d14d44c656daf110a7cf2152571c8 class=flex><a role=button class=flex-auto>Semaine 3</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_3/espace_de_nom/>Espace de nom</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_3/le_fichier_pomxml_en_java/>Le fichier pom.xml en Java</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_3/le_fichier_sitemapxml/>Le fichier sitemap.xml</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_3/les_fichiers_csproj_en_c/>Les fichiers csproj en C#</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_3/rss/>Les formats RSS et Atom</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_3/le_fichier_androidmanifestxml/>Le fichier AndroidManifest.xml</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_3/autoevaluation/>Autoévaluation</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_3/travail_1/>Travail 1</a></li></ul></li><li><input type=checkbox id=section-bf84fe7bc1d1fc0ca62c63ef5e7ace91 class=toggle>
<label for=section-bf84fe7bc1d1fc0ca62c63ef5e7ace91 class=flex><a role=button class=flex-auto>Semaine 4</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_4/xhtml/>XHTML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_4/html_5/>HTML 5</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_4/mathml/>MathML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_4/svg/>SVG</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_4/base64/>Base64</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_4/autoevaluation/>Autoévaluation</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_4/markdown/>MarkDown</a></li></ul></li><li><input type=checkbox id=section-d46744b4036ae363c9fd080c952b7335 class=toggle>
<label for=section-d46744b4036ae363c9fd080c952b7335 class=flex><a role=button class=flex-auto>Semaine 5</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_5/format_de_document/>Format de document</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_5/autoevaluation/>Autoévaluation</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_5/familiarisation_avec_epub/>Familiarisation avec EPUB</a></li></ul></li><li><input type=checkbox id=section-d2ff5c0f26e6dbc38bf6597e7895b8bd class=toggle>
<label for=section-d2ff5c0f26e6dbc38bf6597e7895b8bd class=flex><a role=button class=flex-auto>Semaine 6</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_6/les_documents_epub/>Les documents EPUB</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_6/utilisation_de_sigil_et_de_thorium/>Utilisation de Sigil et de Thorium</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_6/des_pages_web_dynamiques_avec_javascript/>Des pages web dynamiques avec JavaScript</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_6/travail_2/>Travail 2</a></li></ul></li><li><input type=checkbox id=section-a1f707431766a71a2f3942e74979f73c class=toggle>
<label for=section-a1f707431766a71a2f3942e74979f73c class=flex><a role=button class=flex-auto>Semaine 7</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_7/xpath_un_premier_laboratoire/>XPath : un premier laboratoire</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_7/xpath_approfondissement/>XPath : approfondissement</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_7/xpath_second_laboratoire/>XPath : second laboratoire</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_7/autoevaluation/>Autoévaluation</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_7/xpath_20_et_30/>XPath 2.0 et 3.0</a></li></ul></li><li><input type=checkbox id=section-899c8eb30753488ee75ebbf29f7f4c85 class=toggle>
<label for=section-899c8eb30753488ee75ebbf29f7f4c85 class=flex><a role=button class=flex-auto>Semaine 8</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_8/introduction_au_xslt/>Introduction au XSLT</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/xslt_en_ligne/>XSLT en ligne</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/un_peu_plus_de_xslt_fonctionnement_de_base_template_et_value-of/>Un peu plus de XSLT : fonctionnement de base, template et value-of</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/les_valeurs_dattribut/>Les valeurs d’attribut</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/xslt_modulaire/>XSLT modulaire</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/les_noms_delements/>Les noms d’éléments</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/attribut_mode/>Attribut mode</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/la_fonction_generate-id/>La fonction generate-id</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/les_tests/>Les tests</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/les_boucles/>Les boucles</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_8/cles_et_aggregation/>Clés et aggrégation</a></li></ul></li><li><input type=checkbox id=section-352621211a7ea376f6dda9d3797da385 class=toggle>
<label for=section-352621211a7ea376f6dda9d3797da385 class=flex><a role=button class=flex-auto>Semaine 9</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_9/generer_des_noeuds_dynamiquement/>Générer des noeuds dynamiquement</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/variables_et_parametres/>Variables et paramètres</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/mise_en_forme/>Mise en forme</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/espaces_de_noms/>Espaces de noms</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/les_axes/>Les axes</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/etude_dun_exemple_docbook/>Étude d’un exemple (DocBook)</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/laboratoire_xslt/>Laboratoire XSLT</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/laboratoire_xslt_avec_python_optionnel/>Laboratoire XSLT avec Python (optionnel)</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/xslt_20_et_30/>XSLT 2.0 et 3.0</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_9/autoevaluation/>Autoévaluation</a></li></ul></li><li><input type=checkbox id=section-716be24b739235fbf8dd07bc5193a230 class=toggle>
<label for=section-716be24b739235fbf8dd07bc5193a230 class=flex><a role=button class=flex-auto>Semaine 10</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_10/xquery/>XQuery</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_10/laboratoire_xquery_avec_python_optionnel/>Laboratoire XQuery avec Python (optionnel)</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_10/css/>CSS</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_10/laboratoire_css/>Laboratoire CSS</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_10/autoevaluation/>Autoévaluation</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_10/les_langages_declaratifs/>Les langages déclaratifs</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_10/travail_3/>Travail 3</a></li></ul></li><li><input type=checkbox id=section-f91b0f62594bddfc725bde8b2f3b5e82 class=toggle checked>
<label for=section-f91b0f62594bddfc725bde8b2f3b5e82 class=flex><a role=button class=flex-auto>Semaine 11</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_11/modeles_de_programmation/ class=active>Modèles de programmation</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_11/activite_jsonxml_avec_jackson/>Activité JSON/XML avec Jackson</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_11/autoevaluation/>Autoévaluation</a></li></ul></li><li><input type=checkbox id=section-15328d8e9bed4b287b48fee1d849daea class=toggle>
<label for=section-15328d8e9bed4b287b48fee1d849daea class=flex><a role=button class=flex-auto>Semaine 12</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_12/dom/>DOM</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/autoevaluation_dom/>Autoévaluation DOM</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/problemes_resolus/>Problèmes résolus</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/solutions_aux_problemes_resolus/>Solutions aux problèmes résolus</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/dom_javascript_et_autres_langages/>DOM : JavaScript et autres langages</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/asynchronous_javascript_and_xml_ajax/>Asynchronous JavaScript And XML (AJAX)</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/json/>JSON</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/yaml/>YAML</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/docx_microsoft_word/>Docx (Microsoft Word)</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_12/travail_4/>Travail 4</a></li></ul></li><li><input type=checkbox id=section-4978957121bd63cf0228c9834e06fa0b class=toggle>
<label for=section-4978957121bd63cf0228c9834e06fa0b class=flex><a role=button class=flex-auto>Semaine 13</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_13/du_xml_aux_graphes/>Du XML aux graphes</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_13/introduction_au_rdf/>Introduction au RDF</a></li></ul></li><li><input type=checkbox id=section-4b52c904429784d0d6f61687b23e71ab class=toggle>
<label for=section-4b52c904429784d0d6f61687b23e71ab class=flex><a role=button class=flex-auto>Semaine 14</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_14/applications_du_rdf/>Applications du RDF</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_14/autoevaluation/>Autoévaluation</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_14/travail_5/>Travail 5</a></li></ul></li><li><input type=checkbox id=section-0970d75389f23d3a6141226436ccccb5 class=toggle>
<label for=section-0970d75389f23d3a6141226436ccccb5 class=flex><a role=button class=flex-auto>Semaine 15</a></label><ul><li><a href=/inf6450-hugo/docs/semaines/semaine_15/examen_preparatoire/>Examen préparatoire</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_15/solutions_a_lexamen_preparatoire/>Solutions à l’examen préparatoire</a></li><li><a href=/inf6450-hugo/docs/semaines/semaine_15/examen/>Examen</a></li></ul></li><li><a href=/inf6450-hugo/docs/semaines/evaluation/>Évaluation</a></li><li><a href=/inf6450-hugo/docs/semaines/glossaire/>Glossaire</a></li><li><a href=/inf6450-hugo/docs/semaines/pense-bete_dtd/>Pense-bête DTD</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/inf6450-hugo/svg/menu.svg class=book-icon alt=Menu></label><h3>Modèles de programmation</h3><label for=toc-control><img src=/inf6450-hugo/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents></nav></aside></header><article class="markdown book-article"><style>.codeblock{background:#282c34;color:#abb2bf;padding:18px;border-radius:8px;overflow-x:auto;font-family:Consolas,Monaco,courier new,monospace;font-size:.94em;line-height:1.5;margin:1.8em 0}.xmlblock{background:#f8fafc;border:1px solid #cbd5e1;color:#2d3748;padding:18px;border-radius:8px;overflow-x:auto;font-family:Consolas,Monaco,courier new,monospace;font-size:.94em;margin:1.8em 0}code{background:#e5e7eb;padding:3px 7px;border-radius:4px;font-size:.95em}</style><h1>Modèles de programmation XML</h1><p>Il y a plusieurs façons de traiter du XML. Chaque méthode a ses avantages et ses inconvénients. Bien que ce module s’intéresse surtout à l’approche DOM, il est important de connaître l’ensemble des méthodologies possibles et d’avoir une idée des forces et faiblesses relatives de chacune.</p><h3>Traitement du XML comme du texte</h3><p>Un fichier XML est d’abord un fichier texte. Comme certains langages, tel Java, savent bien traiter les fichiers en format texte, ils peuvent directement traiter le XML.</p><pre><span style=color:#e06c75>int</span> montant = <span style=color:#d19a66>10</span><span style=color:#abb2bf>;</span>
<span style=color:#e06c75>String</span> nom = <span style=color:#98c379>"Gérard Beauford"</span><span style=color:#abb2bf>;</span>
<span style=color:#61afef>System</span>.<span style=color:#61afef>out</span>.<span style=color:#61afef>println</span>(<span style=color:#98c379>"&lt;?xml version=\"1.0\" ?&gt;\n&lt;facture&gt;&lt;montant&gt;"</span> + montant +
    <span style=color:#98c379>"&lt;/montant&gt;&lt;nom&gt;"</span> + nom + <span style=color:#98c379>"&lt;/nom&gt;&lt;/facture&gt;"</span>);</pre><p>Cependant, comment savoir si le XML produit est bien formé ? Dans l’exemple précédent, le document affiché ne sera pas du XML bien formé à cause de l’accent dans « Gérard » si l’environnement n’utilise pas UTF-8. Il est donc préférable d’utiliser des librairies dédiées au XML.</p><div class=xmlblock>&lt;?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
&lt;facture>
&lt;montant>432&lt;/montant>
&lt;nom>Gérard Beauford&lt;/nom>
&lt;/facture></div><div class=xmlblock>&lt;?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
&lt;!DOCTYPE facture [
&lt;!ELEMENT facture (montant, nom)>
&lt;!ELEMENT montant (#PCDATA)>
&lt;!ELEMENT nom (#PCDATA)>
&lt;!ATTLIST nom surnom CDATA "Joe">
]>
&lt;facture>&lt;montant>432&lt;/montant>&lt;nom>Gérard Beauford&lt;/nom>&lt;/facture></div><h3>Traitement événementiel</h3><p>Le traitement événementiel (SAX, XNI…) lit le document séquentiellement et déclenche des événements.</p><p>Pour le document suivant :</p><div class=xmlblock>&lt;facture>&lt;montant>432&lt;/montant>&lt;nom>Maman&lt;/nom>&lt;/facture></div><p>Événements SAX générés :</p><ol><li>Début du document</li><li>Début d’un élément « facture »</li><li>Début d’un élément « montant »</li><li>Texte « 432 »</li><li>Fin d’un élément « montant »</li><li>Début d’un élément « nom »</li><li>Texte « Maman »</li><li>Fin d’un élément « nom »</li><li>Fin d’un élément « facture »</li><li>Fin du document</li></ol><pre><span style=color:#c678dd>import</span> <span style=color:#abb2bf>java.io.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>org.xml.sax.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>org.xml.sax.helpers.*;</span>
<p><span style=color:#c678dd>public</span> <span style=color:#c678dd>class</span> <span style=color:#61afef>MonApplicationSAX</span> <span style=color:#c678dd>extends</span> DefaultHandler {</p>
<pre><code>&lt;span style=&quot;color:#c678dd;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#abb2bf;&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color:#61afef;&quot;&gt;startElement&lt;/span&gt;(String uri, String name, String qName, Attributes atts) {
    &lt;span style=&quot;color:#c678dd;&quot;&gt;if&lt;/span&gt; (uri.length() &amp;gt; &lt;span style=&quot;color:#d19a66;&quot;&gt;0&lt;/span&gt;)
        System.out.&lt;span style=&quot;color:#61afef;&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color:#98c379;&quot;&gt;&quot;Début de l’élément &quot;&lt;/span&gt; + uri + &lt;span style=&quot;color:#98c379;&quot;&gt;&quot;:&quot;&lt;/span&gt; + qName);
    &lt;span style=&quot;color:#c678dd;&quot;&gt;else&lt;/span&gt;
        System.out.&lt;span style=&quot;color:#61afef;&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color:#98c379;&quot;&gt;&quot;Début de l’élément &quot;&lt;/span&gt; + name);
}

&lt;span style=&quot;color:#c678dd;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#abb2bf;&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color:#61afef;&quot;&gt;endElement&lt;/span&gt;(String uri, String name, String qName) {
    &lt;span style=&quot;color:#c678dd;&quot;&gt;if&lt;/span&gt; (uri.length() &amp;gt; &lt;span style=&quot;color:#d19a66;&quot;&gt;0&lt;/span&gt;)
        System.out.&lt;span style=&quot;color:#61afef;&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color:#98c379;&quot;&gt;&quot;Fin de l’élément &quot;&lt;/span&gt; + uri + &lt;span style=&quot;color:#98c379;&quot;&gt;&quot;:&quot;&lt;/span&gt; + qName);
    &lt;span style=&quot;color:#c678dd;&quot;&gt;else&lt;/span&gt;
        System.out.&lt;span style=&quot;color:#61afef;&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color:#98c379;&quot;&gt;&quot;Fin de l’élément &quot;&lt;/span&gt; + name);
}

&lt;span style=&quot;color:#c678dd;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#abb2bf;&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color:#61afef;&quot;&gt;characters&lt;/span&gt;(&lt;span style=&quot;color:#e06c75;&quot;&gt;char&lt;/span&gt;[] ch, &lt;span style=&quot;color:#e06c75;&quot;&gt;int&lt;/span&gt; start, &lt;span style=&quot;color:#e06c75;&quot;&gt;int&lt;/span&gt; length) {
    System.out.&lt;span style=&quot;color:#61afef;&quot;&gt;print&lt;/span&gt;(&lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; String(ch, start, length));
}

&lt;span style=&quot;color:#c678dd;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#c678dd;&quot;&gt;static&lt;/span&gt; &lt;span style=&quot;color:#abb2bf;&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color:#61afef;&quot;&gt;main&lt;/span&gt;(String[] args) &lt;span style=&quot;color:#c678dd;&quot;&gt;throws&lt;/span&gt; Exception {
    XMLReader xr = XMLReaderFactory.&lt;span style=&quot;color:#61afef;&quot;&gt;createXMLReader&lt;/span&gt;();
    xr.&lt;span style=&quot;color:#61afef;&quot;&gt;setContentHandler&lt;/span&gt;(&lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; MonApplicationSAX());
    xr.&lt;span style=&quot;color:#61afef;&quot;&gt;parse&lt;/span&gt;(&lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; InputSource(&lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; FileReader(args[&lt;span style=&quot;color:#d19a66;&quot;&gt;0&lt;/span&gt;])));
}
</code></pre><p>}</pre></p><h3>Traitement avec itérateurs (StAX)</h3><p>StAX propose une approche « pull » plus intuitive.</p><pre><span style=color:#c678dd>import</span> <span style=color:#abb2bf>javax.xml.stream.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>java.net.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>java.io.*;</span>
<p><span style=color:#c678dd>public</span> <span style=color:#c678dd>class</span> <span style=color:#61afef>staxex</span> {
<span style=color:#c678dd>public</span> <span style=color:#c678dd>static</span> <span style=color:#abb2bf>void</span> <span style=color:#61afef>main</span>(String[] args) {
String input = args[<span style=color:#d19a66>0</span>];
<span style=color:#c678dd>try</span> {
URL u = <span style=color:#c678dd>new</span> URL(input);
InputStream in = u.<span style=color:#61afef>openStream</span>();
XMLInputFactory factory = XMLInputFactory.<span style=color:#61afef>newInstance</span>();
XMLStreamReader parser = factory.<span style=color:#61afef>createXMLStreamReader</span>(in);
<span style=color:#c678dd>for</span> (<span style=color:#e06c75>int</span> event = parser.<span style=color:#61afef>next</span>();
event != XMLStreamConstants.END_DOCUMENT;
event = parser.<span style=color:#61afef>next</span>()) {
<span style=color:#c678dd>switch</span> (event) {
<span style=color:#c678dd>case</span> XMLStreamConstants.START_ELEMENT:
System.out.<span style=color:#61afef>println</span>(parser.<span style=color:#61afef>getLocalName</span>());
<span style=color:#c678dd>break</span>;
<span style=color:#c678dd>case</span> XMLStreamConstants.END_ELEMENT:
System.out.<span style=color:#61afef>println</span>(parser.<span style=color:#61afef>getLocalName</span>());
<span style=color:#c678dd>break</span>;
<span style=color:#c678dd>case</span> XMLStreamConstants.CDATA:
System.out.<span style=color:#61afef>print</span>(parser.<span style=color:#61afef>getText</span>());
<span style=color:#c678dd>break</span>;
}
}
parser.<span style=color:#61afef>close</span>();
} <span style=color:#c678dd>catch</span> (Exception ex) { System.out.<span style=color:#61afef>println</span>(ex); }
}
}</pre></p><h3>Traitement avec modèle en arbre (DOM)</h3><p>Un document XML peut être vu comme un arbre. Le DOM charge tout le document en mémoire sous forme d’objets.</p><div class=xmlblock>&lt;?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
&lt;!DOCTYPE facture [...]>
&lt;facture>&lt;montant>432&lt;/montant>
&lt;nom>Gérard Beauford&lt;/nom>&lt;/facture></div><p>Représentation en arbre :</p><pre> Document
 └─ facture
     ├─ montant → "432"
     └─ nom (surnom="Joe") → "Gérard Beauford"</pre><h3>Transformations (XSLT)</h3><p>XSLT est idéal pour les transformations simples (XML → HTML, XML → texte…). Pour des traitements complexes avec bases de données, il est insuffisant.</p><h3>XPath</h3><p>XPath permet d’extraire très simplement des données depuis Java :</p><pre><span style=color:#c678dd>import</span> <span style=color:#abb2bf>javax.xml.parsers.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>javax.xml.xpath.*;</span>
<p>DocumentBuilder builder = DocumentBuilderFactory.<span style=color:#61afef>newInstance</span>()
.<span style=color:#61afef>newDocumentBuilder</span>();
Document doc = builder.<span style=color:#61afef>parse</span>(<span style=color:#98c379>&ldquo;<a href=http://www.mondomaine.com/monfichier.xml%22>http://www.mondomaine.com/monfichier.xml"</a></span>);</p>
<p>XPath xpath = XPathFactory.<span style=color:#61afef>newInstance</span>().<span style=color:#61afef>newXPath</span>();
String title = xpath.<span style=color:#61afef>evaluate</span>(<span style=color:#98c379>&rdquo;//nom/text()&quot;</span>, doc);</pre></p><h3>XML comme extension d’un langage (E4X)</h3><p>JavaScript for XML permet d’écrire directement du XML dans le code :</p><div class=xmlblock>var sales = &lt;sales vendor="John">
&lt;item type="peas" price="4" quantity="6"/>
&lt;item type="carrot" price="3" quantity="10"/>
&lt;item type="chips" price="5" quantity="3"/>
&lt;/sales>;</div><h3>Traitement par abstraction</h3><p>De nombreuses bibliothèques (JAXB, bases de données, frameworks) manipulent du XML sans jamais vous forcer à écrire du XML à la main.</p><h3>Sérialisation XML (Java Beans)</h3><pre><span style=color:#c678dd>import</span> <span style=color:#abb2bf>java.beans.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>java.io.*;</span>
<p><span style=color:#c678dd>public</span> <span style=color:#c678dd>class</span> <span style=color:#61afef>Serialization</span> {
<span style=color:#c678dd>public</span> <span style=color:#c678dd>static</span> <span style=color:#abb2bf>void</span> <span style=color:#61afef>main</span>(String[] args) <span style=color:#c678dd>throws</span> IOException {
String o = <span style=color:#c678dd>new</span> String(<span style=color:#98c379>&ldquo;Un objet java&rdquo;</span>);
File f = <span style=color:#c678dd>new</span> File(<span style=color:#98c379>&ldquo;test.xml&rdquo;</span>);</p>
<pre><code>    XMLEncoder e = &lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; XMLEncoder(
        &lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; BufferedOutputStream(&lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; FileOutputStream(f)));
    e.&lt;span style=&quot;color:#61afef;&quot;&gt;writeObject&lt;/span&gt;(o); e.&lt;span style=&quot;color:#61afef;&quot;&gt;close&lt;/span&gt;();

    XMLDecoder d = &lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; XMLDecoder(
        &lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; BufferedInputStream(&lt;span style=&quot;color:#c678dd;&quot;&gt;new&lt;/span&gt; FileInputStream(f)));
    Object lu = d.&lt;span style=&quot;color:#61afef;&quot;&gt;readObject&lt;/span&gt;(); d.&lt;span style=&quot;color:#61afef;&quot;&gt;close&lt;/span&gt;();
    System.out.&lt;span style=&quot;color:#61afef;&quot;&gt;println&lt;/span&gt;(lu.&lt;span style=&quot;color:#61afef;&quot;&gt;equals&lt;/span&gt;(o)); &lt;span style=&quot;color:#5c6370;&quot;&gt;// true&lt;/span&gt;
}
</code></pre><p>}</pre></p><div class=xmlblock>&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;java version="21" class="java.beans.XMLDecoder">
&lt;string>Un objet java&lt;/string>
&lt;/java></div><h3>Services web</h3><p>Les services web REST utilisent simplement HTTP (GET, POST, PUT, DELETE).</p><table><tr><th>Méthode</th><th>Description</th></tr><tr><td>GET</td><td>Récupérer une ressource (sûre et idempotente)</td></tr><tr><td>POST</td><td>Créer ou modifier (non idempotente)</td></tr><tr><td>PUT</td><td>Créer/remplacer une ressource à l’URI donnée</td></tr><tr><td>DELETE</td><td>Supprimer une ressource</td></tr></table><p>Exemple de requête SRU vers la Library of Congress :</p><pre><span style=color:#c678dd>import</span> <span style=color:#abb2bf>org.w3c.dom.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>javax.xml.parsers.*;</span>
<span style=color:#c678dd>import</span> <span style=color:#abb2bf>javax.xml.xpath.*;</span>
<p><span style=color:#c678dd>public</span> <span style=color:#c678dd>class</span> <span style=color:#61afef>example</span> {
<span style=color:#c678dd>public</span> <span style=color:#c678dd>static</span> <span style=color:#abb2bf>void</span> <span style=color:#61afef>main</span>(String[] args) <span style=color:#c678dd>throws</span> Exception {
String base = <span style=color:#98c379>&ldquo;<a href=http://z3950.loc.gov:7090/voyager?%22>http://z3950.loc.gov:7090/voyager?"</a></span>;
String query = <span style=color:#98c379>&ldquo;operation=searchRetrieve&amp;version=1.1&amp;query=(dc.title=%22First Impressions of the New World%22)&quot;</span>;
Document doc = DocumentBuilderFactory.<span style=color:#61afef>newInstance</span>()
.<span style=color:#61afef>newDocumentBuilder</span>().<span style=color:#61afef>parse</span>(base + query);
XPath xpath = XPathFactory.<span style=color:#61afef>newInstance</span>().<span style=color:#61afef>newXPath</span>();
System.out.<span style=color:#61afef>println</span>(<span style=color:#98c379>&ldquo;leader : &ldquo;</span> + xpath.<span style=color:#61afef>evaluate</span>(<span style=color:#98c379>&rdquo;//leader/text()&quot;</span>, doc));
}
}</pre></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><div class="flex flex-wrap justify-between"><a href=/inf6450-hugo/docs/semaines/semaine_10/travail_3/ class="flex align-center float-left book-icon"><img src=/inf6450-hugo/svg/backward.svg alt=Previous title="Travail 3">
<span>Travail 3</span>
</a><a href=/inf6450-hugo/docs/semaines/semaine_11/activite_jsonxml_avec_jackson/ class="flex align-center float-right book-icon"><span>Activité JSON/XML avec Jackson</span>
<img src=/inf6450-hugo/svg/forward.svg alt=Next title="Activité JSON/XML avec Jackson"></a></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents></nav></div></aside></main></body></html>