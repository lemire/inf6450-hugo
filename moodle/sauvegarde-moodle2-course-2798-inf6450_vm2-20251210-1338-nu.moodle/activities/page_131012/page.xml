<?xml version="1.0" encoding="UTF-8"?>
<activity id="72164" moduleid="131012" modulename="page" contextid="970133">
  <page id="72164">
    <name>XSLT en ligne</name>
    <intro></intro>
    <introformat>1</introformat>
    <content>
&lt;script type="application/javascript" src="https://www.unpkg.com/xslt-processor@3.4.0/umd/xslt-processor.js"&gt;&lt;/script&gt;

&lt;h1 style="font-size: 2rem; font-weight: bold; color: #1f2937; text-align: center; margin-bottom: 1.5rem;"&gt;XSLT en ligne&lt;/h1&gt;

&lt;p style="color: #4b5563; margin-bottom: 1rem; line-height: 1.5;"&gt;
    Testez vos transformations XSLT directement dans votre navigateur ! Cet outil vous permet de traiter n'importe quel fichier XML avec une feuille de style XSLT sans utiliser l'instruction &lt;code style="background-color: #f3f4f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"&gt;xml-stylesheet&lt;/code&gt;. C'est une alternative pratique pour programmer et expérimenter avec XSLT sans charger de fichiers externes.
&lt;/p&gt;

&lt;p style="color: #4b5563; margin-bottom: 1rem; line-height: 1.5;"&gt;
    Essayez la transformation XSLT proposée ci-dessous. Pouvez-vous repérer l'expression XPath dans le script ? Modifiez-la pour voir comment le résultat change. La pratique est essentielle pour maîtriser XSLT, alors n'hésitez pas à expérimenter !
&lt;/p&gt;

&lt;p style="color: #4b5563; margin-bottom: 1rem; line-height: 1.5;"&gt;
    &lt;strong&gt;Instructions :&lt;/strong&gt; Saisissez un fichier XML source et une transformation XSLT valide, puis cliquez sur « Transformer ». Vous pouvez réinitialiser les champs avec le bouton « Réinitialiser ».
&lt;/p&gt;

&lt;div style="margin-bottom: 1rem;"&gt;
  &lt;label for="xmlsource" style="display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem; font-family: system-ui, sans-serif;"&gt;Document XML source&lt;/label&gt;
  &lt;textarea id="xmlsource" rows="14" style="width: 100%; font-family: ui-monospace, monospace; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; resize: vertical; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);"&gt;&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;monmessage&gt;
    &lt;de&gt;Jean&lt;/de&gt;
    &lt;a&gt;Pierre&lt;/a&gt;
    &lt;titre type="émotion"&gt;Ouch!&lt;/titre&gt;
    &lt;corps&gt;Maman!&lt;/corps&gt;
&lt;/monmessage&gt;&lt;/textarea&gt;
&lt;/div&gt;

&lt;div style="margin-bottom: 1rem;"&gt;
  &lt;label for="xstlsource" style="display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem; font-family: system-ui, sans-serif;"&gt;Feuille de style XSLT (ex. 1.0)&lt;/label&gt;
  &lt;textarea id="xstlsource" rows="14" style="width: 100%; font-family: ui-monospace, monospace; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; resize: vertical; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);"&gt;&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;

  &lt;xsl:output method="text"/&gt;

  &lt;xsl:template match="/"&gt;
    Résultat de l'attribut type : &lt;xsl:value-of select="//titre/@type"/&gt;
    &lt;xsl:text&gt;
&lt;/xsl:text&gt;
    Nombre d'éléments enfants du document : &lt;xsl:value-of select="count(//*)"/&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;&lt;/textarea&gt;
&lt;/div&gt;

&lt;div style="margin-top:1rem;"&gt;
  &lt;div style="font-weight: 600; font-family: system-ui, sans-serif;"&gt;Résultat&lt;/div&gt;
  &lt;div id="sol" aria-live="polite" style="min-height: 140px; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; white-space: pre-wrap; overflow: auto; margin-top: 0.5rem;"&gt;Cliquez sur « Transformer ».&lt;/div&gt;
  &lt;div id="error" aria-live="assertive" style="color: #b91c1c; margin-top: 0.5rem; display: none; font-weight: 500; white-space: pre-wrap;"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div style="text-align:center; margin-top:1rem;"&gt;
  &lt;button class="btn-primary" onclick="transform()" style="padding: 10px 18px; font-weight: 600; border: none; border-radius: 6px; cursor: pointer; background: #10b981; color: white;"&gt;Transformer&lt;/button&gt;
  &lt;button class="btn-secondary" onclick="resetFields()" style="padding: 10px 18px; font-weight: 600; border: none; border-radius: 6px; cursor: pointer; background: #6b7280; color: white;"&gt;Réinitialiser&lt;/button&gt;
&lt;/div&gt;

&lt;script&gt;
  const defaultXML = document.getElementById('xmlsource').value;
  const defaultXSLT = document.getElementById('xstlsource').value;

  async function transform() {
    const xmlText = document.getElementById('xmlsource').value;
    const xsltText = document.getElementById('xstlsource').value;
    const resultDiv = document.getElementById('sol');
    const errorDiv = document.getElementById('error');
    resultDiv.textContent = 'Transformation en cours…';
    errorDiv.style.display = 'none';

    try {
      const XsltProc = globalThis.XsltProcessor;
      if (!XsltProc) throw new Error('xslt-processor introuvable après chargement');

      const xmlParser = new XsltProc.XmlParser();
      const xmlDoc = xmlParser.xmlParse(xmlText);
      const xsltDoc = xmlParser.xmlParse(xsltText);
      const xsltClass = new XsltProc.Xslt();
      const out = await xsltClass.xsltProcess(xmlDoc, xsltDoc);

      if (typeof out === 'string' &amp;&amp; /&lt;\/?\w+/.test(out)) {
        resultDiv.innerHTML = out;
      } else {
        resultDiv.textContent = out || '(résultat vide)';
      }
    } catch (err) {
      console.error('Erreur de transformation :', err);
      errorDiv.textContent = (err &amp;&amp; err.message) ? err.message : String(err);
      if (err &amp;&amp; err.stack) errorDiv.textContent += '\n\n' + err.stack;
      errorDiv.style.display = 'block';
      resultDiv.textContent = '';
    }
  }

  function resetFields() {
    document.getElementById('xmlsource').value = defaultXML;
    document.getElementById('xstlsource').value = defaultXSLT;
    document.getElementById('sol').textContent = 'Cliquez sur « Transformer ».';
    document.getElementById('error').style.display = 'none';
  }
&lt;/script&gt;















</content>
    <contentformat>1</contentformat>
    <legacyfiles>0</legacyfiles>
    <legacyfileslast>$@NULL@$</legacyfileslast>
    <display>5</display>
    <displayoptions>a:2:{s:10:"printintro";s:1:"0";s:17:"printlastmodified";s:1:"1";}</displayoptions>
    <revision>13</revision>
    <timemodified>1764375210</timemodified>
  </page>
</activity>